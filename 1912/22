package lesson5;

import java.util.Arrays;

public class HeapDemo {
    //åœ¨arrayä¸­ï¼Œ[0.size)çš„éƒ¨åˆ†æ˜¯ä¸€ä¸ªå †ç»“æ„
    //indexä»å“ªä¸ªä½ç½®å¼€å§‹ä¸‹æ²‰
    //ä»¥å¤§å †ä¸ºä¾‹
    //å€ŸåŠ©å‘ä¸‹è°ƒæ•´å¯ä»¥åˆ›å»ºå †
    public static void shiftDown(int[] array,int size,int index){
        int parent = index;
        int child = 2 *  parent + 1;
        while (child < size){
            if(child + 1 < size
                    && array[child + 1] > array[child]){
                    child = child + 1;
            }
            //ifåé¢ï¼Œchildä¸çŸ¥é“æ˜¯åšå·¦è¿˜æ˜¯ğŸ‘‰ï¼Œä½†ä¸€å®šæ˜¯å·¦å³ä¸­æœ€å¤§çš„ä¸‹è¡¨
            if(array[child] > array[parent]){
                //ä¸ç¬¦åˆå¤§é˜Ÿï¼Œäº¤æ¢ä¸¤ä¸ª
                swap(array,child,parent);
            }else {
                //æ»¡è¶³è°ƒæ•´æ¡ä»¶ï¼Œè°ƒæ•´å°±ç»“æŸäº†
                break;
            }
            parent = child;
            child = child * 2;
        }
    }

    //è¦æŠŠ[0,size)èŒƒå›´ä¸­çš„å…ƒç´ å»ºæˆå †
    public static void creatHeap(int[] array,int size){
        //ä»æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹é™¤æ³•ï¼Œä»åå¾€å‰èµ°ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªç»“ç‚¹ï¼Œè¿›è¡Œå‘ä¸‹è°ƒæ•´
        //æ‰¾åˆ°æœ€åä¸€ä¸ªä¸‹æ ‡size - 1
        //(size - 1- 1)/2ä¸ºé£å¶å­ç»“ç‚¹
        for(int i = (size - 1 - 1) / 2;i >= 0;i --){
            shiftDown(array,size,i);
        }
    }
    private static void swap(int[] array, int child, int parent) {
        int t = array[child];
        array[child] = array[parent];
        array[parent] = t;
    }

    public static void main(String[] args) {
        int[] array = {1,2,3,4,5,6,7};
        creatHeap(array,array.length);
        System.out.println(Arrays.toString(array));
    }
}
